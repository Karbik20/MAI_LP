# Отчет по курсовому проекту
## по курсу "Логическое программирование"

### студент: Сафонникова А.Р.

## Результат проверки

Вариант задания:

 - [ ] стандартный, без NLP (на 3)
 - [x] стандартный, с NLP (на 3-4)
 - [ ] продвинутый (на 3-5)
 
| Преподаватель     | Дата         |  Оценка       |
|-------------------|--------------|---------------|
| Сошников Д.В. |              |               |
| Левинская М.А.|              |               |

> *Комментарии проверяющих (обратите внимание, что более подробные комментарии возможны непосредственно в репозитории по тексту программы)*

## Введение

В данном курсовом проекте я могу получить навыки программирования на таком языке как Prolog, вспомнить Python для работы с файлами, а так же составить и обработать своё родословное дерево и узнать, кто кому кем приходится.

## Задание

1. Создать родословное дерево своего рода на несколько поколений (3-4) назад в стандартном формате GEDCOM.
2. Преобразовать файл в формате GEDCOM в набор утверждений на языке Prolog с использованием предиката `parents(потомок, отец, мать)`.
3. Реализовать предикат проверки/поиска шурина.
4. Реализовать программу на языке Prolog, которая позволит определять степень родства двух произвольных индивидуумов в дереве.
5. Реализовать естественно-языковый интерфейс к системе, позволяющий задавать вопросы относительно степеней родства, и получать осмысленные ответы.

## Получение родословного дерева

Я создала родословное дерево на сайте www.myheritage.com, в итоге получила 31 персону. Тех родственников, которых не знала, как зовут, назвала как `<имя кому приходится><кем приходится>`, чтобы при поиске шурина было легче сориентироваться. Далее сохранила дерево в формате GEDCOM.

## Конвертация родословного дерева

Для конвертации родословного дерева я использовала такой язык, как Python, так как у меня уже был опыт работы с файлами и словарями на данном языке, а так же он является довольно простым и удобным для данной задачи.

Для решения поставленной проблемы нам понадобятся два словаря: для личности и для пола (чтоб в дальнейшем определить именно брата, а не сестру (для этого будет удобнее иметь именно отдельные данные по поводу каждого из родственников)).
Так как у каждого человека есть свой ID, будем определять человека благодаря считыванию индификатора INDI, а далее записывать его данные в словарь личности, а так же выписывать его родителей (если такие имеются) с использованием предиката `parents(потомок, отец, мать)`:
```python
gedcom = open('tree.ged', 'r' )
prolog = open('tree.pl', 'w')
name = dict()
sex = dict()

for line in gedcom:
	if "INDI" in line:
		ID = line [5:10]
	elif "NAME" in line:
		FIO = line [7:-2]
		FIO = FIO.replace('/', '')
	elif "_UID" in line:
		name[ID] = FIO
	elif "SEX" in line:
		sex[ID] = line[6]
	elif "WIFE" in line:
		mother = line [10:15]
	elif "HUSB" in line:
		father = line [10:15]
	elif "CHIL" in line:
		child = line [10:15]
		prolog.write("parents( '" + name[child] + "', '" + name[father] + "', '" + name[mother] + "').\n")

```
Далее запишем мужчина или женщина каждый из персон в словарь пола и закроем файлы:
```python
for key in name:
	prolog.write("sex('" + name[key] + "', '" + sex[key] + "').\n")

gedcom.close()
prolog.close()
```

## Предикат поиска родственника

В моём задании нужно найти шурина (брат жены для мужа). Для этого мы будем использовать следующие предикаты:
```prolog
brother(Bro, X):-parents(Bro, Father, Mother), parents(X, Father, Mother), sex(X, 'M'), (Bro\=X).
lady(Husband, Wife):-parents(Child, Husband, Wife), sex(Wife, 'F').
bro_in_law(Husband, Browife):-lady(Husband, Wife), brother(Wife, Browife), sex(Browife, M).
```
где `brother(Bro, X)` определяет брата (ищем общих детей у родителей, чтоб они не совпадали, и определяем пол ребёнка), `lady(Husband, Wife)` определяет жену (так как нет такого случая, что детей у мужа и жены нет, то достаточно посмотреть наличие ребёнка и проверить пол жены), `bro_in_law(Husband, Browife)` определяет как раз-таки шурина (вычисляем жену с братом, а дальше проверяем пол, так как шурин - мужчина).

Результат работы:
```prolog
?- bro_in_law('Roman Safonnikov', Browife). (у его жены нет брата, но есть сестра)
false.

?- bro_in_law('Yuri Baev', Browife). (у его жены брат - Иван Тараненко)
Browife = 'Ivan Taranenko' .

?- bro_in_law('Vladimir Safonnikov', Browife). (у его жены брат - Александр Малахов)
Browife = 'Alexandr Malahov' .

?- bro_in_law('Sergey Safonnikov', Browife). (у его жены есть брат (имени не помню))
Browife = 'Shurin Yana' .

?- bro_in_law('Julia Baeva', Browife). (это женщина, поэтому через поиск пройти не может)
false.
```

## Определение степени родства

Приведите описание метода решения, важные фрагменты исходного кода, протокол работы.

## Естественно-языковый интерфейс

## Выводы

Сформулируйте *содержательные* выводы по курсовому проекту в целом. Чему он вас научила? 
Над чем заставила задуматься? Помните, что несодержательные выводы -
самая частая причина снижения оценки.
